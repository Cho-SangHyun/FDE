DROP TABLE IF EXISTS TB_EXTRACTED_ACCOUNT;
DROP TABLE IF EXISTS TB_DEMAND_TARGET;
DROP TABLE IF EXISTS TB_ACCOUNT;
DROP TABLE IF EXISTS TB_CUSTOMER;
DROP TABLE IF EXISTS TB_PRODUCT;


CREATE TABLE TB_PRODUCT
(
    PROD_CODE CHAR(3)                 NOT NULL PRIMARY KEY,
    PROD_NAME VARCHAR(50)             NOT NULL,
    PROD_TYPE VARCHAR(2) DEFAULT '10' NOT NULL
);

CREATE TABLE TB_CUSTOMER
(
    CUST_ID   BIGINT AUTO_INCREMENT              PRIMARY KEY,
    CUST_NAME VARCHAR(50)                        NOT NULL,
    RES_ID    VARCHAR(200)                       NOT NULL,
    CUST_TYPE CHAR                               NOT NULL,
    REG_DT    DATETIME DEFAULT CURRENT_TIMESTAMP NULL
);

CREATE TABLE TB_ACCOUNT
(
    BASE_DT   DATE                  NOT NULL,
    ACCT_NO   VARCHAR(200)          NOT NULL,
    CUST_ID   BIGINT                NOT NULL,
    PROD_CODE CHAR(3)               NOT NULL,
    BALANCE   DECIMAL(18) DEFAULT 0 NULL,
    PRIMARY KEY (BASE_DT, ACCT_NO)
);

CREATE TABLE TB_DEMAND_TARGET
(
    DEMAND_TARGET_ID   BIGINT AUTO_INCREMENT               PRIMARY KEY,
    BUSINESS_UNIT_ID   BIGINT                              NULL,
    SEQUENCE_NUMBER    BIGINT                              NULL,
    ENCRYPTED_RES_ID   varchar(200)                        NULL,
    DEMAND_TARGET_NAME VARCHAR(50)                         NULL,
    BASE_DT            DATE                                NULL,
    CREATED_AT         DATETIME DEFAULT CURRENT_TIMESTAMP  NOT NULL,
    UPDATED_AT         DATETIME DEFAULT CURRENT_TIMESTAMP  NOT NULL
);

CREATE TABLE TB_EXTRACTED_ACCOUNT
(
    ID               BIGINT AUTO_INCREMENT  PRIMARY KEY,
    BUSINESS_UNIT_ID BIGINT       NOT NULL,
    CUST_ID          BIGINT       NULL,
    CUST_NAME        VARCHAR(50)  NULL,
    RES_ID           VARCHAR(200) NULL,
    ACCT_NO          VARCHAR(200) NULL,
    PROD_NAME        VARCHAR(50)  NULL,
    PROD_TYPE        VARCHAR(2)   NULL,
    BALANCE          DECIMAL(18)  NULL
);


INSERT INTO TB_PRODUCT (PROD_CODE, PROD_NAME, PROD_TYPE)
VALUES ('100', 'FDE생활입출금통장', '10'),
       ('200', 'FDE대박적금통장', '20'),
       ('300', 'FDE사업자대박통장', '10'),
       ('400', 'MY생활입출금', '10'),
       ('500', 'YOUR생활입출금', '10');

INSERT INTO TB_CUSTOMER (CUST_NAME, RES_ID, CUST_TYPE, REG_DT)
VALUES ('풀원무', '7137D250A9B953C0B92F66BAE64AF9EE', 'P', NOW()),
       ('동시생', '0BC7350B9B704600A4140A3A4A5AED5C', 'B', NOW()),
       ('차박전', '51541649B669679314C2FD66496AE2B0', 'P', NOW()),
       ('단자린', 'C5BD97B9B79FED04FE1389701C5B1C34', 'B', NOW());

INSERT INTO TB_ACCOUNT (BASE_DT, ACCT_NO, CUST_ID, PROD_CODE, BALANCE)
VALUES ('2025-12-14', '00002E812DF38B0618D719201873806D', 1, '100', 68288),
       ('2025-12-14', '000043C3733B0AD143A1A34C0591A1D5', 1, '200', 200000),
       ('2025-12-14', '00004F36566A58DC9F610D239DE5B4AD', 2, '100', 312132),
       ('2025-12-14', '000050A1BA25FE54BC25B8F0ABE42C0B', 2, '300', 38281),
       ('2025-12-14', '0000570C5A0D78196AEA0034DCDC0A65', 3, '400', 297123),
       ('2025-12-14', '000065D43EF9A75F1CE3EB6543ED5DDB', 3, '500', 991122),
       ('2025-12-14', '0000EFAEB0210F9B6BB0EB3EFD7FFBC9', 3, '100', 1000000),
       ('2025-12-14', '00016F2FCB57CD5B5DA727CED4FA6D7F', 4, '200', 1000000),
       ('2025-12-14', '000186E44F97397FDFADE977BBF2DEB4', 4, '100', 100000),
       ('2025-12-15', '00002E812DF38B0618D719201873806D', 1, '100', 98288),
       ('2025-12-15', '000043C3733B0AD143A1A34C0591A1D5', 1, '200', 300000),
       ('2025-12-15', '00004F36566A58DC9F610D239DE5B4AD', 2, '100', 223456),
       ('2025-12-15', '000050A1BA25FE54BC25B8F0ABE42C0B', 2, '300', 54321),
       ('2025-12-15', '0000570C5A0D78196AEA0034DCDC0A65', 3, '400', 719372),
       ('2025-12-15', '000065D43EF9A75F1CE3EB6543ED5DDB', 3, '500', 996152),
       ('2025-12-15', '0000EFAEB0210F9B6BB0EB3EFD7FFBC9', 3, '100', 1000000),
       ('2025-12-15', '00016F2FCB57CD5B5DA727CED4FA6D7F', 4, '200', 1200000),
       ('2025-12-15', '000186E44F97397FDFADE977BBF2DEB4', 4, '100', 350000),
       ('2025-12-16', '00002E812DF38B0618D719201873806D', 1, '100', 78288),
       ('2025-12-16', '000043C3733B0AD143A1A34C0591A1D5', 1, '200', 200000),
       ('2025-12-16', '00004F36566A58DC9F610D239DE5B4AD', 2, '100', 371521),
       ('2025-12-16', '000050A1BA25FE54BC25B8F0ABE42C0B', 2, '300', 554321),
       ('2025-12-16', '0000570C5A0D78196AEA0034DCDC0A65', 3, '400', 819372),
       ('2025-12-16', '000065D43EF9A75F1CE3EB6543ED5DDB', 3, '500', 946152),
       ('2025-12-16', '0000EFAEB0210F9B6BB0EB3EFD7FFBC9', 3, '100', 800000),
       ('2025-12-16', '00016F2FCB57CD5B5DA727CED4FA6D7F', 4, '200', 1200000),
       ('2025-12-16', '000186E44F97397FDFADE977BBF2DEB4', 4, '100', 500000);

